<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>新增药品</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" th:href="@{/layuimini/lib/layui-v2.5.5/css/layui.css}" media="all">
    <link rel="stylesheet" th:href="@{/layuimini/css/public.css}" media="all">
    <style>
        body {
            background-color: #ffffff;
        }
        h1{
        	color: rgb(102,110,232);
        	font-weight: 900;
        	font-size: 30px;
        }
        .myLabel{
        	margin-bottom: 5px;
        }
    </style>
</head>
<body>
<div class="layui-form layuimini-form">
    <div style="margin: 10px 10px 10px 10px">
        <form class="layui-form layui-form-pane" action="">
        	<h1>基本信息</h1>
	            <div class="layui-form-item">
	            	<div class="layui-inline">
	                    <div class="myLabel">药品编码</div>
	                    <div>
	                        <input type="text" id="drug_sn" name="drug_sn" th:value="${tDrug.drug_sn}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px" readonly="readonly">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">药品条形码</div>
	                    <div>
	                        <input type="text" id="bar_code" name="bar_code" th:value="${tDrug.bar_code}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">药品通用名<font style="color:red">*</font></div>
	                    <div>
	                        <input type="text" id="name"  name="name" lay-verify="required" lay-reqtext="药品名不能为空" th:value="${tDrug.name}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">药品拼音码</div>
	                    <div>
	                        <input type="text" id="phonetic_code" name="phonetic_code" th:value="${tDrug.phonetic_code}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">药品分类<font style="color:red">*</font></div>
	                    <div>
	                       <select name="type" class="" id="type" style="width:300px"  lay-verify="required" lay-reqtext="药品分类不能为空">
		                        <option value=""></option>
		                        <option value="西/成药" th:selected="${tDrug.type == '西/成药'}">西/成药</option>
		                        <option value="中药" th:selected="${tDrug.type == '中药'}">中药</option>
		                    </select>
	                    </div>
	                </div>
	            </div>
	            <div class="layui-form-item">
	                <div class="layui-inline">
	                    <div class="myLabel">药品规格<font style="color:red">*</font></div>
	                    <div>
	                        <input type="text" id="specification" name="specification" lay-verify="required" lay-reqtext="药品规格不能为空" th:value="${tDrug.specification}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">药品剂型</div>
	                    <div>
	                        <input type="text" id="dosage_form" name="dosage_form" th:value="${tDrug.dosage_form}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">发票项目<font style="color:red">*</font></div>
	                    <div>
	                        <select name="invoice" class="" id="invoice" style="width:300px" lay-verify="required" lay-reqtext="发票项不能为空">
		                        <option value=""></option>
		                        <option value="诊疗费" th:selected="${tDrug.invoice == '诊疗费'}">诊疗费</option>
		                        <option value="检测费" th:selected="${tDrug.invoice == '检测费'}">检测费</option>
		                        <option value="西药费" th:selected="${tDrug.invoice == '西药费'}">西药费</option>
		                        <option value="中药费" th:selected="${tDrug.invoice == '中药费'}">中药费</option>
		                    </select>
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">&nbsp;  </div>
	                    <div>
	                        <label>OTC药品：</label>
	                        <input type="radio" id="" name="otc" value="1" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px" th:checked="${tDrug.otc == 1}">是
	                   <input type="radio" id="" name="otc" value="0" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px" th:checked="${tDrug.otc == 0}">否
	                    </div>
	                </div>
	                
	            </div>
	            <div class="layui-form-item">
	                <div class="layui-inline">
	                    <div class="myLabel">批准文号</div>
	                    <div>
	                        <input type="text" id="approval_number" name="approval_number" th:value="${tDrug.approval_number}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:250px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">生产厂家</div>
	                    <div>
	                        <input type="text" id="manufacturer" name="manufacturer" th:value="${tDrug.manufacturer}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:250px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                	<div class="myLabel">&nbsp;  </div>
	                    <div>
	                        <label>药品状态：</label>
	                        <input type="radio" id="" name="status" value="1" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px" th:checked="${tDrug.status == 1}">启用
	                   <input type="radio" id="" name="status" value="0" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px" th:checked="${tDrug.status == 0}">停用
	                    </div>
	                </div>
	            </div>
        	<h1>包装信息</h1>
	            <div class="layui-form-item">
	                <div class="layui-inline">
	                    <div class="myLabel">包装单位<font style="color:red">*</font></div>
	                    <div>
	                        <input type="text" id="packing_unit" name="packing_unit" lay-verify="required" lay-reqtext="包装单位不能为空" th:value="${tDrug.packing_unit}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">基本系数</div>
	                    <div>
	                        <input type="text" id="basic_coefficient" name="basic_coefficient" th:value="${tDrug.basic_coefficient}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">基本单位</div>
	                    <div>
	                        <input type="text" id="basic_unit" name="basic_unit" th:value="${tDrug.basic_unit}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">剂量系数</div>
	                    <div>
	                       <input type="text" id="dose_coefficient" name="dose_coefficient" th:value="${tDrug.dose_coefficient}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	            </div>
	            <div class="layui-form-item">
	                <div class="layui-inline">
	                    <div class="myLabel">剂量单位</div>
	                    <div>
	                        <input type="text" id="dose_unit" name="dose_unit" th:value="${tDrug.dose_unit}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">采购价</div>
	                    <div>
	                        <input type="text" id="purchase_amount" name="purchase_amount" th:value="${tDrug.purchase_amount}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">零售价</div>
	                    <div>
	                        <input type="text" id="retail_amount" name="retail_amount" th:value="${tDrug.retail_amount}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">&nbsp;  </div>
	                    <div>
	                        <label>允许拆零：</label>
	                        <input type="radio" id="" name="dismounted" value="1" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px" th:checked="${tDrug.dismounted == 1}">是
	                   <input type="radio" id="" name="dismounted" value="0" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px"  th:checked="${tDrug.dismounted == 0}">否
	                    </div>
	                </div>
	                
	            </div>
        	<h1>功效说明</h1>
	            <div class="layui-form-item">
	                <div class="layui-inline">
	                    <div class="myLabel">用法<font style="color:red">*</font></div>
	                    <div>
	                        <input type="text" id="drug_use" name="drug_use" lay-verify="required" lay-reqtext="用法不能为空" th:value="${tDrug.drug_use}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">单次用量</div>
	                    <div>
	                        <input type="text" id="single_dosage" name="single_dosage" th:value="${tDrug.single_dosage}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">频度</div>
	                    <div>
	                        <input type="text" id="frequency" name="frequency" th:value="${tDrug.frequency}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	            </div>
        	<h1>其他信息</h1>
	            <div class="layui-form-item">
	                <div class="layui-inline">
	                    <div class="myLabel">库存下限</div>
	                    <div>
	                        <input type="text" id="minimum_inventory" name="minimum_inventory" th:value="${tDrug.minimum_inventory}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">库存上限</div>
	                    <div>
	                        <input type="text" id="maximum_inventory" name="maximum_inventory" th:value="${tDrug.maximum_inventory}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">货位号</div>
	                    <div>
	                        <input type="text" id="goods_location" name="goods_location" th:value="${tDrug.goods_location}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">有效期预警</div>
	                    <div>
	                       <input type="text" id="expiration_date_warning" name="expiration_date_warning" th:value="${tDrug.expiration_date_warning}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	            </div>
	            <div class="layui-form-item">
	                <div class="layui-inline">
	                    <div class="myLabel">药品说明</div>
	                    <div>
	                        <input type="text" id="instruction" name="instruction" th:value="${tDrug.instruction}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	                <div class="layui-inline">
	                    <div class="myLabel">备注</div>
	                    <div>
	                        <input type="text" id="remarks" name="remarks" th:value="${tDrug.remarks}" placeholder=""
	                   class="layui-input search_input" autocomplete="off" style="width:300px">
	                    </div>
	                </div>
	            </div>
	            <div class="layui-form-item">
	            	<div class="layui-inline" style="float: right;">
	                    <button type="submit" class="layui-btn layui-btn-primary"  lay-submit lay-filter="saveDrugInfo"><!-- <i class="layui-icon"></i>  -->保存</button>
		            </div>
		            <!-- <div class="layui-inline">
	                    <button type="button" class="layui-btn layui-btn-primary"  lay-submit lay-filter="data-search-btn"><i class="layui-icon"></i> 返回</button>
		            </div> -->
	            </div>
        </form>
    </div>
</div>
<script th:src="@{/layuimini/lib/layui-v2.5.5/layui.js}" charset="utf-8"></script>
<script>
    layui.use(['form'], function () {
        var form = layui.form,
            layer = layui.layer,
            $ = layui.$;

      //参数data就是表单中的数据
        form.on('submit(saveDrugInfo)',function (data) {
            //data.field;//当前容器的全部表单字段，名值对形式：{name: value}

            $.ajax({
                url:'/pharmacy/saveDrugInfo',
                data:data.field,
                dataType:'json',
                type:'post',
                success:function(result){
                    if(result.code == 200){
                        layer.msg('保存成功',{icon:1,time:1000},function () {
                            top.layer.closeAll("iframe");//关闭窗口
                            parent.location.reload();//从新加载数据
                        })
                    }else{
                        layer.msg(result.message,{icon:5});
                    }
                }
            })
            return false;
        })

    });
</script>
</body>
</html>