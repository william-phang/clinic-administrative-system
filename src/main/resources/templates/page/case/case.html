<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<title>新开就诊</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1">
<link rel="stylesheet"
	th:href="@{/layuimini/lib/layui-v2.5.5/css/layui.css}" media="all">
<link rel="stylesheet" th:href="@{/layuimini/css/public.css}"
	media="all">

<!-- 引入data日期组件 -->
<script th:src="@{/layui/laydate/laydate.js} " charset="utf-8"></script>
<script th:src="@{/layuimini/lib/layui-v2.5.5/layui.js}" charset="utf-8"></script>
</head>

<body>
	<!-- 编写模板 -->
	<script id="demo" type="text/html">
		<form class="layui-form layui-form-pane" action="">
			<div class="layui-form-item">
				<div class="layui-inline"  > 
					<label class="layui-form-label">患者姓名</label>
					<div class="layui-input-inline">
						<input type="text" value="{{data.tregistration.tpatient.patient_name}}" placeholder="患者姓名"  name="email" lay-verify="email" autocomplete="off" class="layui-input">
					<i class="layui-icon layui-icon-search" style="position: absolute; top: 8px; right: 20px;" ></i>
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">患者卡号</label>
					<div class="layui-input-inline">
						<input type="text" value="{{data.tregistration.tpatient.patient_card}}" placeholder="请输入病人卡号" name="email" lay-verify="number" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">患者年龄</label>
					<div class="layui-input-inline">
						<input type="text" value="{{data.tregistration.tpatient.patient_age}}" placeholder="请输入患者年龄" name="email" lay-verify="email" autocomplete="off" class="layui-input">
					</div>
				</div>
				<div class="layui-inline">
					<label class="layui-form-label">出生日期</label>
					<div class="layui-input-inline">
						<input id="date" type="text" value="{{data.tregistration.tpatient.patient_birthday}}" name="date" lay-verify="email" autocomplete="off" class="layui-input" /> 
						<i class="layui-icon layui-icon-gift" style="position: absolute; top: 8px; right: 8px;"></i>
					</div>
				</div>
			</div>
				<div class="layui-form-item">
					<div class="layui-inline">
						<label class="layui-form-label">性别</label>
						<div class="layui-input-block" style="width: 190px;">
							<select name="interest" lay-filter="aihao">
								{{#  if(data.tregistration.tpatient.patient_gender === 0 ){ }}
									<option value="男" >男</option>
								{{#  } }}
								{{#  if(data.tregistration.tpatient.patient_gender === 1 ){ }}
									<option value="女" >女</option>
								{{#  } }}
								{{#  if(data.length === 0 ){ }}
									<option value="0">男</option>
									<option value="1">女</option>
									<option value="2">未知</option>
								{{#  } }}
							</select>
						</div>
					</div>
					<div class="layui-inline">
						<label style="margin-left: 10px;" class="layui-form-label">电话号码</label>
						<div class="layui-input-inline">
							<input type="text" value="{{data.tregistration.tpatient.patient_phone}}" placeholder="请输入手机号码" name="email" lay-verify="email" autocomplete="off" class="layui-input">
						</div>
					</div>
					<div class="layui-inline">
						<label class="layui-form-label">证件号码</label>
						<div class="layui-input-inline">
							<input type="tel" value="{{data.tregistration.tpatient.patient_number}}" placeholder="请输入证件号码" name="phone" lay-verify="required|phone" autocomplete="off" class="layui-input">
						</div>
					</div>
						<div class="layui-inline">
							<label class="layui-form-label">接诊类型</label>
							<div class="layui-input-block" style="width: 190px;">
								<select name="interest" lay-filter="aihao">
									{{#  if(data.tregistration.reception_type != null ){ }}
										<option value="{{data.tregistration.reception_type}}" >{{data.tregistration.reception_type}}</option>
									{{#  } }}
									{{#  if(data.length === 0 ){ }}
										<option value="0" selected="">初诊</option>
										<option value="1">复诊</option>
									{{#  } }}
								</select>
							</div>
						</div>
					</div>

				<!-- 三址联动 -->
				<div class="layui-form">
					<div class="layui-form-item" id="area-picker">
						<div class="layui-form-label">地址</div>
							<div class="layui-input-inline" style="width: 200px;">
								<select name="province" class="province-selector" data-value="广东省"  lay-filter="province-1">
										<option value="">请选择省</option>
										<option value="浙江" selected="">浙江省</option>
										<option value="你的工号">江西省</option>
										<option value="你最喜欢的老师">福建省</option>
									</select>
								</div>
								<div class="layui-input-inline" style="width: 200px;">
									<select name="city" class="city-selector" data-value="深圳市"
										lay-filter="city-1">
										<option value="">请选择市</option>
										<option value="杭州">杭州</option>
										<option value="宁波" disabled="">宁波</option>
										<option value="温州">温州</option>
										<option value="温州">台州</option>
										<option value="温州">绍兴</option>
									</select>
								</div>
								<div class="layui-input-inline" style="width: 200px;">
									<select name="county" class="county-selector" data-value="龙岗区"
										lay-filter="county-1">
										<option value="">请选择县/区</option>
										<option value="西湖区">西湖区</option>
										<option value="余杭区">余杭区</option>
										<option value="拱墅区">临安市</option>
									</select>
								</div>
							</div>
						</div>
						

						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label">诊断</label>
								<div class="layui-input-inline" style="width: 515px;">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">通过关键字可查询相关诊断信息</option>
										<option value="1">流行性出热血</option>
										<option value="2">急性气支管炎</option>
										<option value="3">上呼吸感染</option>
										<option value="4">咽炎</option>
										<option value="5">急性肠胃炎</option>
										<option value="6">月经不调</option>
										<option value="7">急性扁桃体炎</option>
										<option value="8">流行性乙型脑炎</option>
										<option value="9">白喉</option>
										<option value="10">脑膜炎</option>
									</select> <i class="layui-icon layui-icon-search"
										style="position: absolute; top: 8px; right: 20px;"></i>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">医嘱</label>
								<div class="layui-input-inline" style="width: 515px;">
									<select name="modules" lay-verify="required" lay-search="">
										<option value="">通过关键字可查询相关医嘱</option>
										<option value="1">低盐低糖饮食</option>
										<option value="2">忌辛冷等食物</option>
										<option value="3">忌受凉吹风</option>
										<option value="4">少糖</option>
										<option value="5">忌熬夜忌饮酒</option>
										<option value="6">多喝开水</option>
										<option value="7">忌辛辣</option>
									</select> <i class="layui-icon layui-icon-search"
										style="position: absolute; top: 8px; right: 20px;"></i>
								</div>
							</div>
						</div>
					</form>
	</script>

	<fieldset class="layui-elem-field layui-field-title"
		style="margin-top: 20px;">
		<legend style="color: #FFB800;">新开就诊</legend>
		<!-- 建立试图 -->
	</fieldset>
	<div class="layuimini-container">
		<div class="layuimini-main">
			<fieldset class="table-search-fieldset">
				<legend>搜索信息</legend>
				<div style="margin: 10px 10px 10px 10px" id="patient_name_view">
					<!-- 地址三联 -->
					<script>
						//配置插件目录
						layui.config({
							base : './mods/',
							version : '1.0'
						});
						//一般直接写在一个js文件中
						layui
								.use(
										[ 'layer', 'form', 'layarea' ],
										function() {
											var layer = layui.layer, form = layui.form, layarea = layui.layarea;

											layarea.render({
												elem : '#area-picker',
												change : function(res) {
													//选择结果
													console.log(res);
												}
											});
										});
					</script>

					<script>
						// 渲染表单
						layui.use('form', function() {
							var form = layui.form;
						});

						// 日期
						laydate.render({
							elem : '#date',
							calendar : true,
							theme : 'grid',
						});
					</script>
				</div>
			</fieldset>
		</div>
	</div>


	<div class="layuimini-container">
		<div class="layuimini-main">
			<fieldset class="table-search-fieldset">
				<legend class="layui-form-label"
					style="color: #1E9FFF; font-size: 20px;">体格信息</legend>
				<div style="margin: 10px 10px 10px 10px">
					<form class="layui-form" action="">
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label">体温</label>
								<div class="layui-input-inline" style="width: 100px;">
									<input type="tel" name="phone" lay-verify="required|phone"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">°C</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">呼吸</label>
								<div class="layui-input-inline" style="width: 100px;">
									<input type="text" name="email" lay-verify="email"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">次/分</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">脉搏</label>
								<div class="layui-input-inline" style="width: 100px;">
									<input type="text" name="email" lay-verify="email"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">次/分</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">血压</label>
								<div class="layui-input-inline" style="width: 100px;">
									<input type="text" name="email" lay-verify="email"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">min/mmHg</div>
							</div>
						</div>
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label">身高</label>
								<div class="layui-input-inline" style="width: 100px;">
									<input type="tel" name="phone" lay-verify="required|phone"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">Cm</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">体重</label>
								<div class="layui-input-inline" style="width: 100px; margin-left: -6px;">
									<input type="text" name="email" lay-verify="email"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">Kg</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label" >血糖</label>
								<div class="layui-input-inline" style="width: 100px; margin-left: 14px;">
									<input type="text" name="email" lay-verify="email"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">mmol/l</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label" >血脂</label>
								<div class="layui-input-inline" style="width: 100px; margin-left: -8px;">
									<input type="text" name="email" lay-verify="email"
										autocomplete="off" class="layui-input">
								</div>
								<div class="layui-form-mid layui-word-aux">mmol/l</div>
							</div>
						</div>

						<label class="layui-form-label"
							style="color: #1E9FFF; font-size: 20px;">病历信息</label>
						<div class="layui-form-mid layui-word-aux">(病历信息可在系统设置-基础设置中的自定义设置)</div>
						<br /> <br />
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label">发病日期</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input id="date1" type="text" name="date" lay-verify="email"
										autocomplete="off" class="layui-input" /> <i
										class="layui-icon layui-icon-gift"
										style="position: absolute; top: 8px; right: 8px; color: #FF5722;"></i>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">医嘱</label>
								<div class="layui-input-inline" style="width: 515px;">
									<select name="简化多选+搜索+大小写敏感" multiple="" lay-search="required"
										lay-case="" lay-omit="">
										<option value="">主诉</option>
										<optgroup label="常用症状:">
											<option value="头疼" name="头疼">头疼</option>
											<option value="头晕" name="头晕">头晕</option>
											<option value="恶心" name="恶心">恶心</option>
											<option value="鼻塞" name="鼻塞">鼻塞</option>
											<option value="呕吐" name="呕吐">呕吐</option>
											<option value="咳血" name="咳血">咳血</option>
											<option value="胸闷" name="胸闷">胸闷</option>
											<option value="心慌" name="心慌">心慌</option>
											<option value="红疹" name="红疹">红疹</option>
											<option value="腹胀" name="腹胀">腹胀</option>
											<option value="便秘" name="便秘">便秘</option>
											<option value="腰疼" name="腰疼">腰疼</option>
											<option value="呼吸困难" name="呼吸困难">呼吸困难</option>
										</optgroup>
										<optgroup label="常用时间:">
											<option value="早晨" name="早晨">早晨</option>
											<option value="中午" name="中午">中午</option>
											<option value="傍晚" name="傍晚">傍晚</option>
											<option value="晚上" name="晚上">晚上</option>
											<option value="小时" name="小时">小时</option>
											<option value="天" name="天">天</option>
											<option value="周" name="周">周</option>
										</optgroup>
										<optgroup label="常用标点:">
											<option value="," name=",">,</option>
											<option value=";" name=";">;</option>
											<option value="。" name="。">。</option>
											<option value=":" name=":">:</option>
											<option value="°C" name="°C">°C</option>
										</optgroup>
										<optgroup label="常用词汇:">
											<option value="经常" name="经常">经常</option>
											<option value="持续" name="持续">持续</option>
											<option value="过敏" name="过敏">过敏</option>
											<option value="剧烈" name="剧烈">剧烈</option>
											<option value="轻微" name="轻微">轻微</option>
											<option value="偶尔" name="偶尔">偶尔</option>
										</optgroup>
									</select>
								</div>
							</div>
						</div>
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">现病史</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">既往史</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
						</div>
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">过敏史</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">个人史</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
						</div>
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">家族史</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">辅助检查</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
						</div>
						<div class="layui-form-item">
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">治疗意见</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label" style="margin-top: 25px;">备注</label>
								<div class="layui-input-inline" style="width: 515px;">
									<input type="tel" style="height: 100px;" name="phone"
										lay-verify="required|phone" autocomplete="off"
										class="layui-input">
								</div>
							</div>
						</div>
					</form>
					<script>
						//Demo
						layui.use('form', function() {
							var form = layui.form;
							//监听提交
							form.on('submit(formDemo)', function(data) {
								layer.msg(JSON.stringify(data.field));
								return false;
							});
						});
					</script>
					<script>
						laydate.render({
							elem : '#date1',
							calendar : true,
							theme : 'grid',
						});
					</script>
				</div>
			</fieldset>
		</div>
	</div>

	<!-- 渲染模板 -->
	<script>
		layui
				.use(
						[ 'table', 'jquery', 'layer', 'form', 'laypage',
								'laytpl', 'laydate' ],
						function() {
							var table = layui.table, form = layui.form, $ = layui.jquery, laypage = layui.laypage, layer = layui.layer, laytpl = layui.laytpl, laydate = layui.laydate;
							$
									.post(
											'[[@{/case}]]',
											null,
											function(resp) {
												console.log(resp);
												if (resp.state = 200) {
													console.log(resp.state);
													// 模板渲染
													data = resp;
													console.log(data);
													//console.log(data.patient.patient_name+":"+data.patient.patient_phone+":"+data.patient.patient_card);
													var getTpl = demo.innerHTML, view = document
															.getElementById('patient_name_view');
													laytpl(getTpl)
															.render(
																	data,
																	function(
																			html) {
																		view.innerHTML = html;
																	});
													form.render() //全部刷新
												}
											});
						});
	</script>
</body>

</html>